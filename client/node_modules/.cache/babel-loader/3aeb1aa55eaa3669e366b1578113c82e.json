{"ast":null,"code":"import _defineProperty from \"/Users/hajbo/BME/alkfelj/ALFHF2019-whyarewestillalive/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/hajbo/BME/alkfelj/ALFHF2019-whyarewestillalive/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/hajbo/BME/alkfelj/ALFHF2019-whyarewestillalive/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/hajbo/BME/alkfelj/ALFHF2019-whyarewestillalive/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/hajbo/BME/alkfelj/ALFHF2019-whyarewestillalive/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/hajbo/BME/alkfelj/ALFHF2019-whyarewestillalive/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/hajbo/BME/alkfelj/ALFHF2019-whyarewestillalive/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/hajbo/BME/alkfelj/ALFHF2019-whyarewestillalive/client/src/components/WebChat.jsx\";\nimport React from 'react';\nimport '../util/util.js';\nimport urls from \"../util/constants\";\n\nvar WebChat =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(WebChat, _React$Component);\n\n  function WebChat() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, WebChat);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(WebChat)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      history: [],\n      name: '',\n      message: ''\n    };\n\n    _this.receiveMessage = function (msg) {\n      var newHistory = [].concat(_toConsumableArray(_this.state.history), [msg]);\n\n      _this.setState({\n        history: newHistory\n      });\n    };\n\n    _this.sendMessage = function (msg) {\n      if (_this.websocket !== undefined) _this.websocket.send(msg);\n    };\n\n    _this.messageOnChange = function (e) {\n      _this.setState(_defineProperty({}, e.currentTarget.id, e.currentTarget.value));\n    };\n\n    _this.buttonOnClick = function (e) {\n      _this.sendMessage(_this.state.name + ': ' + _this.state.message);\n    };\n\n    return _this;\n  }\n\n  _createClass(WebChat, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.websocket = new WebSocket(urls.CHAT_URL);\n\n      this.websocket.onmessage = function (event) {\n        _this2.receiveMessage(event.data);\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"jumbotron\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, \"Ask for help...\"), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, \"Name:\"), React.createElement(\"input\", {\n        id: \"name\",\n        type: \"text\",\n        className: \"form-control\",\n        onChange: this.messageOnChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"message\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, \"Message:\"), React.createElement(\"input\", {\n        id: \"message\",\n        type: \"text\",\n        className: \"form-control\",\n        onChange: this.messageOnChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn btn-defaultt\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"glyphicon glyphicon-envelope\",\n        onClick: this.buttonOnClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }))), React.createElement(\"textarea\", {\n        className: \"form-control message-history\",\n        readOnly: true,\n        value: this.state.history.reduce(function (acc, val) {\n          return acc + val + '\\n';\n        }, ''),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return WebChat;\n}(React.Component);\n\nexport default WebChat;","map":{"version":3,"sources":["/Users/hajbo/BME/alkfelj/ALFHF2019-whyarewestillalive/client/src/components/WebChat.jsx"],"names":["React","urls","WebChat","state","history","name","message","receiveMessage","msg","newHistory","setState","sendMessage","websocket","undefined","send","messageOnChange","e","currentTarget","id","value","buttonOnClick","WebSocket","CHAT_URL","onmessage","event","data","reduce","acc","val","Component"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,OAAO,iBAAP;AACA,OAAOC,IAAP,MAAiB,mBAAjB;;IAEMC,O;;;;;;;;;;;;;;;;;UACFC,K,GAAQ;AACJC,MAAAA,OAAO,EAAE,EADL;AAEJC,MAAAA,IAAI,EAAE,EAFF;AAGJC,MAAAA,OAAO,EAAE;AAHL,K;;UAMRC,c,GAAiB,UAACC,GAAD,EAAS;AACtB,UAAIC,UAAU,gCAAO,MAAKN,KAAL,CAAWC,OAAlB,IAA2BI,GAA3B,EAAd;;AACA,YAAKE,QAAL,CAAc;AAACN,QAAAA,OAAO,EAAEK;AAAV,OAAd;AACH,K;;UAEDE,W,GAAc,UAACH,GAAD,EAAS;AACnB,UAAI,MAAKI,SAAL,KAAmBC,SAAvB,EACI,MAAKD,SAAL,CAAeE,IAAf,CAAoBN,GAApB;AACP,K;;UASDO,e,GAAkB,UAACC,CAAD,EAAO;AACrB,YAAKN,QAAL,qBAAgBM,CAAC,CAACC,aAAF,CAAgBC,EAAhC,EAAqCF,CAAC,CAACC,aAAF,CAAgBE,KAArD;AACH,K;;UAEDC,a,GAAgB,UAACJ,CAAD,EAAO;AACnB,YAAKL,WAAL,CAAiB,MAAKR,KAAL,CAAWE,IAAX,GAAkB,IAAlB,GAAyB,MAAKF,KAAL,CAAWG,OAArD;AACH,K;;;;;;;wCAbmB;AAAA;;AAChB,WAAKM,SAAL,GAAiB,IAAIS,SAAJ,CAAcpB,IAAI,CAACqB,QAAnB,CAAjB;;AACA,WAAKV,SAAL,CAAeW,SAAf,GAA2B,UAACC,KAAD,EAAW;AAClC,QAAA,MAAI,CAACjB,cAAL,CAAoBiB,KAAK,CAACC,IAA1B;AACH,OAFD;AAGH;;;6BAUQ;AACL,aACI;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADJ,EAGI;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAO,QAAA,OAAO,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,EAEI;AAAO,QAAA,EAAE,EAAC,MAAV;AAAiB,QAAA,IAAI,EAAC,MAAtB;AAA6B,QAAA,SAAS,EAAC,cAAvC;AAAsD,QAAA,QAAQ,EAAE,KAAKV,eAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,EAGI;AAAO,QAAA,OAAO,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHJ,EAII;AAAO,QAAA,EAAE,EAAC,SAAV;AAAoB,QAAA,IAAI,EAAC,MAAzB;AAAgC,QAAA,SAAS,EAAC,cAA1C;AAAyD,QAAA,QAAQ,EAAE,KAAKA,eAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJJ,EAKI;AAAQ,QAAA,SAAS,EAAC,kBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAqC;AAAM,QAAA,SAAS,EAAC,8BAAhB;AACM,QAAA,OAAO,EAAE,KAAKK,aADpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAArC,CALJ,CAHJ,EAaI;AAAU,QAAA,SAAS,EAAC,8BAApB;AAAmD,QAAA,QAAQ,EAAE,IAA7D;AACU,QAAA,KAAK,EAAE,KAAKjB,KAAL,CAAWC,OAAX,CAAmBsB,MAAnB,CAA0B,UAACC,GAAD,EAAMC,GAAN;AAAA,iBAAcD,GAAG,GAAGC,GAAN,GAAY,IAA1B;AAAA,SAA1B,EAA0D,EAA1D,CADjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAbJ,CADJ,CADJ;AAoBH;;;;EArDiB5B,KAAK,CAAC6B,S;;AAwD5B,eAAe3B,OAAf","sourcesContent":["import React from 'react';\r\n\r\nimport '../util/util.js'\r\nimport urls from \"../util/constants\";\r\n\r\nclass WebChat extends React.Component {\r\n    state = {\r\n        history: [],\r\n        name: '',\r\n        message: ''\r\n    };\r\n\r\n    receiveMessage = (msg) => {\r\n        let newHistory = [...this.state.history, msg];\r\n        this.setState({history: newHistory});\r\n    };\r\n\r\n    sendMessage = (msg) => {\r\n        if (this.websocket !== undefined)\r\n            this.websocket.send(msg);\r\n    };\r\n\r\n    componentDidMount() {\r\n        this.websocket = new WebSocket(urls.CHAT_URL);\r\n        this.websocket.onmessage = (event) => {\r\n            this.receiveMessage(event.data)\r\n        };\r\n    }\r\n\r\n    messageOnChange = (e) => {\r\n        this.setState({[e.currentTarget.id]: e.currentTarget.value});\r\n    };\r\n\r\n    buttonOnClick = (e) => {\r\n        this.sendMessage(this.state.name + ': ' + this.state.message);\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"jumbotron\">\r\n                <div className=\"row\">\r\n                    <h2>Ask for help...</h2>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"name\">Name:</label>\r\n                        <input id=\"name\" type=\"text\" className=\"form-control\" onChange={this.messageOnChange}/>\r\n                        <label htmlFor=\"message\">Message:</label>\r\n                        <input id=\"message\" type=\"text\" className=\"form-control\" onChange={this.messageOnChange}/>\r\n                        <button className=\"btn btn-defaultt\"><span className=\"glyphicon glyphicon-envelope\"\r\n                                                                   onClick={this.buttonOnClick}/>\r\n                        </button>\r\n                    </div>\r\n\r\n                    <textarea className=\"form-control message-history\" readOnly={true}\r\n                              value={this.state.history.reduce((acc, val) => acc + val + '\\n', '')}/>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default WebChat;"]},"metadata":{},"sourceType":"module"}