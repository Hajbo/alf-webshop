{"ast":null,"code":"import _defineProperty from \"/Users/hajbo/BME/alkfelj/ALFHF2019-whyarewestillalive/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/hajbo/BME/alkfelj/ALFHF2019-whyarewestillalive/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/hajbo/BME/alkfelj/ALFHF2019-whyarewestillalive/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/hajbo/BME/alkfelj/ALFHF2019-whyarewestillalive/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/hajbo/BME/alkfelj/ALFHF2019-whyarewestillalive/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/hajbo/BME/alkfelj/ALFHF2019-whyarewestillalive/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/hajbo/BME/alkfelj/ALFHF2019-whyarewestillalive/client/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport WebChat from \"./components/WebChat\";\nimport Cart from \"./components/Cart\";\nimport ProductListing from \"./components/ProductListing\";\nimport CategorySwitcher from \"./components/CategorySwitcher\";\nimport { getCartDataToPost, getCategories, getProductsPerCategory, postData } from \"./util/util\";\nimport urls from \"./util/constants\";\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      categories: [],\n      products: [],\n      quantities: [],\n      productsInCart: [],\n      cart: {},\n      pageState: 'shop'\n    };\n\n    _this.refreshCategories = function () {\n      getCategories().then(function (response) {\n        return _this.setState({\n          categories: response._embedded.categories\n        });\n      });\n    };\n\n    _this.refreshProductPerCategory = function () {\n      getProductsPerCategory(_this.state.currentCategory).then(function (response) {\n        return _this.setState({\n          products: response._embedded.products\n        });\n      });\n    };\n\n    _this.categoryOnClick = function (e) {\n      var categoryId = e.currentTarget.dataset.id;\n\n      var category = _this.state.categories.find(function (e) {\n        return e.id == categoryId;\n      });\n\n      _this.setState({\n        currentCategory: category,\n        pageState: \"shop\"\n      });\n\n      _this.state.currentCategory = category;\n\n      _this.refreshCategories();\n\n      _this.refreshProductPerCategory();\n    };\n\n    _this.addtoCartOnClick = function (e) {\n      var productId = e.currentTarget.dataset.id;\n\n      var product = _this.state.products.find(function (e) {\n        return e.id == productId;\n      });\n\n      var currentQuantity = _this.state.cart[productId];\n      if (currentQuantity === undefined) currentQuantity = 0;\n      currentQuantity += Number(_this.state.quantities[productId]);\n      _this.state.cart[productId] = currentQuantity;\n\n      _this.state.productsInCart.push(product);\n\n      _this.setState({\n        cart: _this.state.cart,\n        productsInCart: _this.state.productsInCart\n      });\n    };\n\n    _this.quantitiesOnChange = function (e) {\n      _this.state.quantities[e.currentTarget.dataset.id] = e.currentTarget.value;\n\n      _this.setState({\n        quantities: _this.state.quantities\n      });\n    };\n\n    _this.checkoutDataOnChange = function (e) {\n      _this.setState(_defineProperty({}, e.currentTarget.id, e.currentTarget.value));\n    };\n\n    _this.checkoutOnClick = function (e) {\n      var data = getCartDataToPost(_this.state.cart, _this.state.customerName, _this.state.customerAddress);\n      postData(urls.ORDER_URL, data);\n\n      _this.setState({\n        quantities: [],\n        cart: [],\n        productsInCart: []\n      });\n\n      _this.refreshCategories();\n\n      _this.refreshProductPerCategory();\n    };\n\n    _this.changePageState = function (e) {\n      _this.setState({\n        pageState: e.currentTarget.dataset.state\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.refreshCategories();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(CategorySwitcher, {\n        click: this.categoryOnClick,\n        categories: this.state.categories,\n        onChangePageState: this.changePageState,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }), this.state.pageState === \"shop\" ? React.createElement(ProductListing, {\n        products: this.state.products,\n        onAddToCart: this.addtoCartOnClick,\n        onQuantityChange: this.quantitiesOnChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }) : \"\", this.state.pageState === \"cart\" ? React.createElement(Cart, {\n        cart: this.state.cart,\n        products: this.state.productsInCart,\n        onCheckoutDataChange: this.checkoutDataOnChange,\n        onCheckout: this.checkoutOnClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }) : \"\", this.state.pageState === \"chat\" ? React.createElement(WebChat, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }) : \"\");\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/hajbo/BME/alkfelj/ALFHF2019-whyarewestillalive/client/src/App.js"],"names":["React","WebChat","Cart","ProductListing","CategorySwitcher","getCartDataToPost","getCategories","getProductsPerCategory","postData","urls","App","state","categories","products","quantities","productsInCart","cart","pageState","refreshCategories","then","response","setState","_embedded","refreshProductPerCategory","currentCategory","categoryOnClick","e","categoryId","currentTarget","dataset","id","category","find","addtoCartOnClick","productId","product","currentQuantity","undefined","Number","push","quantitiesOnChange","value","checkoutDataOnChange","checkoutOnClick","data","customerName","customerAddress","ORDER_URL","changePageState","Component"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport './App.css';\n\nimport WebChat from \"./components/WebChat\";\nimport Cart from \"./components/Cart\";\nimport ProductListing from \"./components/ProductListing\";\nimport CategorySwitcher from \"./components/CategorySwitcher\";\nimport {getCartDataToPost, getCategories, getProductsPerCategory, postData} from \"./util/util\";\nimport urls from \"./util/constants\"\n\nclass App extends React.Component {\n    state = {\n        categories: [],\n        products: [],\n        quantities: [],\n        productsInCart: [],\n        cart: {},\n        pageState: 'shop'\n    };\n\n\n    refreshCategories = () => {\n        getCategories().then(response => this.setState({categories: response._embedded.categories}));\n    };\n\n    refreshProductPerCategory = () => {\n        getProductsPerCategory(this.state.currentCategory).then(response => this.setState({products: response._embedded.products}));\n    };\n\n    categoryOnClick = (e) => {\n        let categoryId = e.currentTarget.dataset.id;\n        let category = this.state.categories.find(e => e.id == categoryId);\n        this.setState({currentCategory: category, pageState: \"shop\"});\n        this.state.currentCategory = category;\n        this.refreshCategories();\n        this.refreshProductPerCategory();\n\n    };\n\n    addtoCartOnClick = (e) => {\n        let productId = e.currentTarget.dataset.id;\n        let product = this.state.products.find(e => e.id == productId);\n        let currentQuantity = this.state.cart[productId];\n        if (currentQuantity === undefined)\n            currentQuantity = 0;\n        currentQuantity += Number(this.state.quantities[productId]);\n        this.state.cart[productId] = currentQuantity;\n        this.state.productsInCart.push(product);\n        this.setState({\n            cart: this.state.cart,\n            productsInCart: this.state.productsInCart\n        });\n    };\n\n    quantitiesOnChange = (e) => {\n        this.state.quantities[e.currentTarget.dataset.id] = e.currentTarget.value;\n        this.setState({quantities: this.state.quantities});\n    };\n\n    checkoutDataOnChange = (e) => {\n        this.setState({[e.currentTarget.id]: e.currentTarget.value});\n    };\n\n    checkoutOnClick = (e) => {\n        let data = getCartDataToPost(this.state.cart, this.state.customerName, this.state.customerAddress);\n        postData(urls.ORDER_URL, data);\n        this.setState({quantities: [], cart: [], productsInCart: []});\n        this.refreshCategories();\n        this.refreshProductPerCategory();\n    };\n\n    changePageState = (e) => {\n        this.setState({pageState: e.currentTarget.dataset.state});\n    };\n\n    componentDidMount() {\n        this.refreshCategories();\n    };\n\n    render() {\n        return (\n            <div>\n                <CategorySwitcher click={this.categoryOnClick} categories={this.state.categories}\n                                  onChangePageState={this.changePageState}/>\n\n                {this.state.pageState === \"shop\" ?\n                    (<ProductListing products={this.state.products} onAddToCart={this.addtoCartOnClick}\n                                     onQuantityChange={this.quantitiesOnChange}/>) : \"\"\n                }\n\n                {this.state.pageState === \"cart\" ?\n                    (<Cart cart={this.state.cart} products={this.state.productsInCart}\n                           onCheckoutDataChange={this.checkoutDataOnChange} onCheckout={this.checkoutOnClick}/>) : \"\"\n                }\n\n                {this.state.pageState === \"chat\" ? (<WebChat/>) : \"\"}\n            </div>\n        );\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}